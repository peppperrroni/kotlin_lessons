# Урок 1: Переменные и типы данных в Kotlin

## Введение

Kotlin — статически типизированный язык программирования, который работает поверх JVM (Java Virtual Machine). Одним из ключевых преимуществ Kotlin является его выразительный и лаконичный синтаксис, который позволяет писать более читаемый и безопасный код по сравнению с Java.

В этом уроке мы рассмотрим основные типы данных в Kotlin и способы объявления переменных.

## Объявление переменных

В Kotlin существует два основных способа объявления переменных:

### 1. Неизменяемые переменные (val)

`val` используется для объявления переменных, значение которых не может быть изменено после инициализации (аналог `final` в Java).

```kotlin
val immutable = "Это неизменяемая переменная"
// immutable = "Новое значение" // Ошибка компиляции!
```

### 2. Изменяемые переменные (var)

`var` используется для объявления переменных, значение которых может быть изменено после инициализации.

```kotlin
var mutable = "Это изменяемая переменная"
mutable = "Новое значение" // Допустимо
```

> **Рекомендация**: Предпочитайте использовать `val` вместо `var`, когда это возможно. Это делает код более предсказуемым и облегчает понимание потока данных.

## Явное указание типа и вывод типа

В Kotlin тип переменной может быть указан явно или определен компилятором автоматически (вывод типа).

### Явное указание типа

```kotlin
val explicitString: String = "Строка с явно указанным типом"
var explicitInt: Int = 42
```

### Вывод типа (автоматическое определение)

```kotlin
val inferredString = "Строка с автоматически определенным типом" // Тип: String
var inferredInt = 42 // Тип: Int
```

## Основные типы данных

### Числовые типы

#### Целочисленные типы

```kotlin
val byte: Byte = 127                // 8 бит, диапазон: -128 до 127
val short: Short = 32767            // 16 бит, диапазон: -32768 до 32767
val int: Int = 2147483647           // 32 бита, диапазон: -2^31 до 2^31-1
val long: Long = 9223372036854775807L // 64 бита, диапазон: -2^63 до 2^63-1
```

#### Числа с плавающей точкой

```kotlin
val float: Float = 3.14f            // 32 бита, 6-7 значащих цифр
val double: Double = 3.14159265359  // 64 бита, 15-16 значащих цифр
```

### Символьный и строковый типы

```kotlin
val char: Char = 'A'                // 16 бит, символ Unicode
val string: String = "Привет, мир!" // Строка (последовательность символов)
```

#### Многострочные строки

Kotlin поддерживает многострочные строки с использованием тройных кавычек (`"""`):

```kotlin
val multilineString = """
    Это многострочная строка.
    Она может содержать несколько строк.
    Переносы строк сохраняются.
""".trimIndent()
```

Метод `trimIndent()` удаляет общий минимальный отступ от всех строк, делая форматирование более удобным.

#### Шаблоны строк (интерполяция)

Kotlin позволяет встраивать выражения непосредственно в строки:

```kotlin
val name = "Kotlin"
val greeting = "Привет, $name!" // Простая переменная
val calculation = "2 + 2 = ${2 + 2}" // Выражение
```

### Логический тип

```kotlin
val boolean: Boolean = true // true или false
```

### Массивы

В Kotlin есть несколько способов создания массивов:

```kotlin
// Создание массива целых чисел
val intArray = intArrayOf(1, 2, 3, 4, 5)

// Создание массива строк
val stringArray = arrayOf("Яблоко", "Банан", "Вишня")

// Доступ к элементам и свойствам массива
val firstElement = intArray[0] // Первый элемент
val arraySize = intArray.size // Длина массива
```

## Nullable типы и безопасность от null

Одной из ключевых особенностей Kotlin является встроенная защита от NullPointerException.

### Nullable и Non-nullable типы

По умолчанию все типы в Kotlin не могут содержать `null`:

```kotlin
// var nonNullable: String = null // Ошибка компиляции!
```

Чтобы разрешить значение `null`, нужно добавить `?` к типу:

```kotlin
var nullable: String? = null // Допустимо
```

### Безопасная работа с nullable типами

Kotlin предоставляет несколько операторов для безопасной работы с nullable типами:

#### Оператор безопасного вызова (?.)

```kotlin
// Вернет null, если переменная равна null
val length = nullable?.length
```

#### Оператор элвис (?:)

```kotlin
// Возвращает значение справа, если слева null
val length = nullable?.length ?: 0
```

#### Оператор утверждения ненулевого значения (!!)

```kotlin
// Выбрасывает NullPointerException, если значение null
// val length = nullable!!.length // Опасно!
```

> **Важно**: Оператор `!!` следует использовать только в тех случаях, когда вы абсолютно уверены, что значение не может быть `null`. В противном случае предпочтительнее использовать безопасные операторы `?.` и `?:`.

## Преобразование типов

В Kotlin нет неявного преобразования типов, что помогает избежать неожиданных ошибок:

```kotlin
val intValue = 42
// val longValue: Long = intValue // Ошибка компиляции!
```

Для преобразования типов необходимо использовать явные функции преобразования:

```kotlin
val longValue: Long = intValue.toLong()
val doubleValue: Double = intValue.toDouble()
val stringValue: String = intValue.toString()

// Преобразование строки в число
val parsedInt = "42".toInt()
val parsedDouble = "3.14".toDouble()
```

## Константы

Константы в Kotlin объявляются на уровне файла или внутри объектов-компаньонов с помощью `const val`:

```kotlin
// Константы должны быть примитивными типами или String
const val PI = 3.14159
const val APP_VERSION = "1.0.0"
```

Константы вычисляются во время компиляции и должны быть инициализированы значениями, известными на этапе компиляции.

## Заключение

В этом уроке мы рассмотрели основные типы данных в Kotlin и способы объявления переменных. Kotlin предлагает богатую систему типов с встроенной защитой от null, что делает код более безопасным и предсказуемым.

Ключевые особенности:
- Два вида переменных: неизменяемые (`val`) и изменяемые (`var`)
- Статическая типизация с выводом типов
- Встроенная защита от null с помощью nullable типов и безопасных операторов
- Явное преобразование типов
- Удобная работа со строками, включая шаблоны и многострочные строки

Эти концепции являются фундаментальными для Kotlin и будут использоваться во всех последующих уроках. 